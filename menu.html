<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Menu</title>
  <link rel="stylesheet" href="/css/Menu.css">
</head>
<body>
  <div class="contenedor">
    <section class="nav-bar">
      <img loading="lazy" src="IMG/BCL MGM.png" class="BCL_MGM" height="80px" />
      <div class="bienvenido">
        <h1>Bienvenido, <span>Christian Loera</span></h1>
      </div>
    </section>
    <section class="contenedor2">
      <div class="menu-icon">â˜°</div>
      <nav class="menu">
        <button class="home bg">Home</button>
        <button class="reportes">Reportes</button>
        <button class="herramientas">Herramientas</button>
      </nav>
      <div id="container-todo" class="container-todo">
        <div class="container-categoria">
          <div class="cuadros" onclick="location.href='I+D.html';">
            <img class="icono" loading="lazy" src="IMG/i+d.png" draggable="false"/>
          </div>
          <div class="titulo">I + D</div>
        </div>
        <div class="container-categoria">
          <div class="cuadros" onclick="location.href='Mkt.html';">
            <img class="icono" loading="lazy" src="IMG/mkt.png" draggable="false" height="95px"/>
          </div>
          <div class="titulo">MKT</div>
        </div>
        <div class="container-categoria">
          <div class="cuadros" onclick="location.href='Ops.html';">
            <img class="icono" loading="lazy" src="IMG/ops.png" draggable="false"/>
          </div>
          <div class="titulo">OPS</div>
        </div>
        <div class="container-categoria">
          <div class="cuadros" onclick="location.href='RH+DO.html';">
            <img class="icono" loading="lazy" src="IMG/rh+do.png" draggable="false"/>
          </div>
          <div class="titulo">RH + DO</div>
        </div>
        <div class="container-categoria">
          <div class="cuadros" onclick="location.href='Ventas.html';">
            <img class="icono" loading="lazy" src="IMG/ventas.png" draggable="false"/>
          </div>
          <div class="titulo">VENTAS</div>
        </div>
        <div class="container-categoria">
          <div class="cuadros" onclick="location.href='TradeMkt.html';">
            <img class="icono" loading="lazy" src="IMG/TradeMkt.png" draggable="false"/>
          </div>
          <div class="titulo">TRADE MKT</div>
        </div>
        <div class="container-categoria">
          <div class="cuadros" onclick="location.href='finanzas.html';">
            <img class="icono" loading="lazy" src="IMG/finanzas.png" draggable="false"/>
          </div>
          <div class="titulo">FINANZAS</div>
        </div>
        <div class="container-categoria">
          <div class="cuadros" onclick="location.href='Fiscal.html';">
            <img class="icono" loading="lazy" src="IMG/fiscal.png" draggable="false"/>
          </div>
          <div class="titulo">FISCAL</div>
        </div>
      </div>
      <div id="container-todo2" class="container-todo2" style="display: none;">
        <!-- Reportes -->
        <div class="container-categoria" id="linkReporteRubros">
          <div class="cuadros">
            <img class="icono" loading="lazy" src="IMG/reporteGastos.png" draggable="false"/>
          </div>
          <div class="titulo">Reporte de Gastos</div>
        </div>
      </div>
      <div id="container-todo3" class="container-todo3" style="display: none;">
        <!-- Herramientas -->
        <div class="container-categoria" id="linkFormularioCondiciones">
          <div class="cuadros">
            <img class="icono" loading="lazy" src="IMG/solicitudDescuento.png" draggable="false"/>
          </div>
          <div class="titulo">Solicitud </br> de Descuento</div>
        </div>
        
        <div class="container-categoria" id="linkCalculadora">
          <div class="cuadros">
            <img class="icono" loading="lazy" src="IMG/condicionesComerciales.png" draggable="false" height="100px"/>
          </div>
          <div class="titulo">Condiciones </br> Comerciales</div>
        </div>
        
        <div class="container-categoria" id="linkSolped">
          <div class="cuadros">
            <img class="icono" loading="lazy" src="IMG/solped.png" draggable="false" height="100px"/>
          </div>
          <div class="titulo">Solped</div>
        </div>
        
        <div class="container-categoria" id="linkRubro">
          <div class="cuadros">
            <img class="icono" loading="lazy" src="IMG/solicitudCambioPresupuesto.png" draggable="false" height="100px"/>
          </div>
          <div class="titulo">Solicitud Cambio</br> de Presupuesto</div>
        </div>
      </div>
    </section>
  </div>

  <script src="js/Menu.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const authToken = sessionStorage.getItem("authToken");
            if (!authToken) {
                redirectToLogin();
            } else {
                updateUsernameDisplay();
                updateLinks(authToken);
            }
        });

        function updateUsernameDisplay() {
    const name = sessionStorage.getItem("name");
    if (name) {
        document.getElementById('username').innerText = name;
    } else {
        console.error("No name found in sessionStorage");
        redirectToLogin();
    }
}

        function redirectToLogin() {
            window.location.href = 'index.html';
        }
        function updateLinks(token) {
            document.getElementById('linkRubro').onclick = function() { window.location.href = `https://formulariov3.onrender.com/rubro.html?token=${token}`;};
            document.getElementById('linkReporteRubros').onclick = function() { window.location.href = `https://formulariov3.onrender.com/Reporte.html?token=${token}`;};
            document.getElementById('linkCalculadora').onclick = function() { window.location.href = `https://condiciones.onrender.com?token=${token}`;};
            document.getElementById('linkSolped').onclick = function() { window.location.href = `https://formulariov3.onrender.com/?token=${token}`;};
            document.getElementById('linkFormularioCondiciones').onclick = function() { window.location.href = `https://condiciones.onrender.com/formulario?token=${token}`;};
        }

    </script>
</body>
</html>
