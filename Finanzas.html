<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Finanzas</title>
  <link rel="stylesheet" href="css/apps.css">
</head>
<body>
  <div class="contenedor">
    <section class="nav-bar">
      <img loading="lazy" src="IMG/BCL MGM.png" class="BCL_MGM" height="80px" />
      <div class="bienvenido">
        <h1>Finanzas</h1> 
      </div>
    </section>
    <div class="vertical-line"></div>

    <section class="contenedor2">
      <div class="menu-icon">â˜°</div>
      <nav class="menu">
        <button class="home" onclick="window.history.back();">Home</button>
      </nav>
      <div class="contenedor-general">
      <div class="container-todo">
        <div class="herramientas">Herramientas</div>
        <div class="container-categoria" >
          <div class="cuadros" id="linkRubro">
            <img class="icono" loading="lazy" src="IMG/solicitudCambioPresupuesto.png" draggable="false"/>
          </div>
          <div class="titulo">Solicitud cambio <br> de presupuesto</div>
        </div>
        <div class="container-categoria" >
          <div class="cuadros" id="linkSolped">
            <img class="icono" loading="lazy" src="IMG/solped.png" draggable="false"/>
          </div>
          <div class="titulo">Solped</div>
        </div>
      </div>
      <div class="container-todo borde">
        <div class="reportes"> Reportes</div>
      <div class="container-categoria"  >
        <div class="cuadros" id="linkReporteRubros">
          <img class="icono" loading="lazy" src="IMG/reporteGastos.png" draggable="false"/>
        </div>
        <div class="titulo">Reporte de Gastos</div>
      </div>
        </div>
      </div>
      </div>
    </section>
  </div>
  
  <script src="js/apps.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
        const authToken = sessionStorage.getItem("authToken");
        if (!authToken) {
            redirectToLogin();
        } else {
            updateUsernameDisplay();
            updateLinks(authToken);
        }
    });

    function updateUsernameDisplay() {
const name = sessionStorage.getItem("name");
if (name) {
    document.getElementById('username').innerText = name;
} else {
    console.error("No name found in sessionStorage");
    redirectToLogin();
}
}
    function redirectToLogin() {
        window.location.href = 'index.html';
    }
    function updateLinks(token) {
    document.getElementById('linkRubro').onclick = function() { window.location.href = `https://formulariov3.onrender.com/rubro.html?token=${token}`; };
    document.getElementById('linkReporteRubros').onclick = function() { window.location.href = `hhttps://formulariov3.onrender.com/Reporte.html?token=${token}`; };
    document.getElementById('linkSolped').onclick = function() { window.location.href = `https://formulariov3.onrender.com/?token=${token}`; };
}
</script>
</body>
</html>
