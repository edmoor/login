<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Menu</title>
  <link rel="stylesheet" href="menu.css">
</head>
<body>
  <div class="contenedor">
    <section class="nav-bar">
      <img loading="lazy" src="/img/BCL MGM (1).png" class="BCL_MGM" height="80px" />
      <div class="bienvenido">
        <h1>Bienvenido, <span id="username"></span></h1> 
      </div>
    </section>
    <section class="contenedor2">
      <div class="menu-icon">â˜°</div>
      <nav class="menu">
        <div class="home bg">Home</div>
        <div class="reportes">Reportes</div>
        <div class="herramientas">Herramientas</div>
      </nav>



      <div class="container-todo">
        <div class="container-categoria">
          <div class="cuadros">
            <img class="icono" loading="lazy" src="img/i+d.png"/>
          </div>
          <div class="titulo">I + D</div>
        </div>
        <div class="container-categoria">
          <div class="cuadros">
            <img class="icono" loading="lazy" src="img/mkt.png"/>
          </div>
          <div class="titulo">MKT</div>
        </div>
        <div class="container-categoria">
          <div class="cuadros">
            <img class="icono" loading="lazy" src="img/ops.png"/>
          </div>
          <div class="titulo">OPS</div>
        </div>
        <div class="container-categoria">
          <div class="cuadros">
            <img class="icono" loading="lazy" src="img/rh+do.png"/>
          </div>
          <div class="titulo">RH + DO</div>
        </div>
        <div class="container-categoria">
          <div class="cuadros">
            <img class="icono" loading="lazy" src="img/ventas.png"/>
          </div>
          <div class="titulo">VENTAS</div>
        </div>
        <div class="container-categoria">
          <div class="cuadros">
            <img class="icono" loading="lazy" src="img/tradeMkt.png"/>
          </div>
          <div class="titulo">TRADE MKT</div>
        </div>
        <div class="container-categoria">
          <div class="cuadros">
            <img class="icono" loading="lazy" src="img/finanzas.png"/>
          </div>
          <div class="titulo">FINANZAS</div>
        </div>
        <div class="container-categoria">
          <div class="cuadros">
            <img class="icono" loading="lazy" src="img/fiscal.png"/>
          </div>
          <div class="titulo">FISCAL</div>
        </div>
      </div>
      
        </div>
      </div>
    </section>
  </div>

<script src="menu.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const authToken = sessionStorage.getItem("authToken");
            if (!authToken) {
                redirectToLogin();
            } else {
                updateUsernameDisplay();
                updateLinks(authToken);
            }
        });

        function updateUsernameDisplay() {
    const name = sessionStorage.getItem("name");
    if (name) {
        document.getElementById('username').innerText = name;
    } else {
        console.error("No name found in sessionStorage");
        redirectToLogin();
    }
}


        function redirectToLogin() {
            window.location.href = 'index.html';
        }

        function updateLinks(token) {
            document.getElementById('linkRubro').href = `https://formulariov3.onrender.com/rubro.html?token=${token}`;
            document.getElementById('linkReporteRubros').href = `https://formulariov3.onrender.com/Reporte.html?token=${token}`;
            document.getElementById('linkCalculadora').href = `https://condiciones.onrender.com?token=${token}`;
            document.getElementById('linkSolped').href = `https://formulariov3.onrender.com/?token=${token}`;
            document.getElementById('linkFormularioCondiciones').href = `https://condiciones.onrender.com/formulario?token=${token}`;
        }

        const reportesBtn = document.getElementById('reportes-btn');
        const herramientasBtn = document.getElementById('herramientas-btn');
        const reportesMenu = document.getElementById('reportes-menu');
        const herramientasMenu = document.getElementById('herramientas-menu');

        reportesBtn.addEventListener('click', function() {
            const isHidden = reportesMenu.style.display === 'none' || reportesMenu.style.display === '';
            reportesMenu.style.display = isHidden ? 'block' : 'none';
            herramientasMenu.style.display = 'none';
        });

        herramientasBtn.addEventListener('click', function() {
            const isHidden = herramientasMenu.style.display === 'none' || herramientasMenu.style.display === '';
            herramientasMenu.style.display = isHidden ? 'block' : 'none';
            reportesMenu.style.display = 'none';
        });
    </script>
</body>
</html>
